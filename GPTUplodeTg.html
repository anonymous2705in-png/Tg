<!doctype html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram File Upload & Direct Link (Emoji Safe)</title>
<style>
  * { box-sizing: border-box; margin:0; padding:0; }
  body { font-family: 'Segoe UI', Arial, sans-serif; background:#0f172a; color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; padding:20px; }
  .container { background:#1e293b; padding:30px; border-radius:12px; width:100%; max-width:500px; box-shadow:0 10px 25px rgba(0,0,0,0.5); }
  h1 { text-align:center; margin-bottom:20px; font-size:24px; }
  p { text-align:center; margin-bottom:20px; color:#cbd5e1; font-size:14px; }
  label { display:block; margin-top:10px; margin-bottom:5px; font-weight:bold; }
  input[type="text"], input[type="file"] { width:100%; padding:12px; border-radius:8px; border:none; margin-bottom:10px; }
  button { width:100%; padding:12px; border-radius:8px; border:none; background:#22c55e; color:#fff; font-size:16px; cursor:pointer; transition:0.3s; }
  button:hover { background:#16a34a; }
  #output { margin-top:20px; text-align:center; word-wrap:break-word; }
  a { color:#60a5fa; text-decoration:none; font-weight:bold; }
  a:hover { text-decoration:underline; }
  pre { background:#0f172a; padding:12px; border-radius:8px; max-height:200px; overflow-y:auto; margin-top:10px; }
  video, audio, img { margin-top:10px; max-width:100%; border-radius:8px; }
  @media(max-width:600px){ .container { padding:20px; } }
</style>
</head>
<body>

<div class="container">
  <h1>ЁЯУд Telegram Upload & Direct Link</h1>
  <p>роОро▓рпНро▓ро╛ file types (image, video, audio, document) роЕрокрпНро▓рпЛроЯрпБ роЪрпЖропрпНродрпБ direct download link & preview рокрпЖро▒рпБроЩрпНроХро│рпН.  
  Emoji/special characters file name-ро▓рпН роЗро░рпБроирпНродро╛ро▓рпН auto remove роЪрпЖропрпНропрокрпНрокроЯрпБроорпН.</p>

  <label>Bot Token</label>
  <input type="text" id="token" placeholder="Bot Token роЙро│рпНро│ро┐роЯро╡рпБроорпН" />

  <label>Channel/Group ID</label>
  <input type="text" id="chatId" placeholder="Channel ID роЙро│рпНро│ро┐роЯро╡рпБроорпН" />

  <label>Select File</label>
  <input type="file" id="fileInput" />

  <button onclick="uploadFile()">ЁЯЪА Upload & Get Direct Link</button>

  <div id="output"></div>
  <pre id="jsonOut">No data yet.</pre>
</div>

<script>
// Emoji/Special character remove function
function sanitizeFileName(name) {
  // letters, numbers, dot, dash, underscore роороЯрпНроЯрпБроорпН allow роЪрпЖропрпНропрпБроорпН
  return name.replace(/[^\w.\-]/g, '_');
}

async function uploadFile() {
  const token = document.getElementById('token').value.trim();
  const chatId = document.getElementById('chatId').value.trim();
  const fileInput = document.getElementById('fileInput');
  const out = document.getElementById('output');
  const jsonOut = document.getElementById('jsonOut');

  if(!token || !chatId){ alert('Bot Token Channel ID'); return; }
  if(!fileInput.files.length){ alert('File select'); return; }

  let file = fileInput.files[0];
  const safeName = sanitizeFileName(file.name);
  if(safeName !== file.name){
    file = new File([file], safeName, { type: file.type });
  }

  out.innerHTML = "тП│ File роЕрокрпНро▓рпЛроЯрпБ роЪрпЖропрпНропрокрпНрокроЯрпБроХро┐ро▒родрпБ...";
  jsonOut.textContent = "";

  try {
    const formData = new FormData();
    formData.append('chat_id', chatId);

    const type = file.type;
    let apiURL = `https://api.telegram.org/bot${token}/sendDocument`; // default

    if(type.startsWith('image/')){
      formData.append('photo', file);
      apiURL = `https://api.telegram.org/bot${token}/sendPhoto`;
    } else if(type.startsWith('video/')){
      formData.append('video', file);
      apiURL = `https://api.telegram.org/bot${token}/sendVideo`;
    } else if(type.startsWith('audio/')){
      formData.append('audio', file);
      apiURL = `https://api.telegram.org/bot${token}/sendAudio`;
    } else {
      formData.append('document', file);
      apiURL = `https://api.telegram.org/bot${token}/sendDocument`;
    }

    const res = await fetch(apiURL, { method:'POST', body: formData });
    const data = await res.json();
    jsonOut.textContent = JSON.stringify(data, null, 2);

    if(!data.ok){ out.innerHTML="тЭМ File роЕрокрпНро▓рпЛроЯрпБ роЪрпЖропрпНроп роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ. Token & Channel ID роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН."; return; }

    let fileId;
    if(data.result.document) fileId = data.result.document.file_id;
    else if(data.result.video) fileId = data.result.video.file_id;
    else if(data.result.audio) fileId = data.result.audio.file_id;
    else if(data.result.photo) fileId = data.result.photo.slice(-1)[0].file_id;

    const fRes = await fetch(`https://api.telegram.org/bot${token}/getFile?file_id=${fileId}`);
    const fData = await fRes.json();
    jsonOut.textContent += "\n\n---\nFile Info:\n" + JSON.stringify(fData,null,2);

    if(!fData.ok){ out.innerHTML="тЭМ File info рокрпЖро▒ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ."; return; }

    const path = fData.result.file_path;
    const url = `https://api.telegram.org/file/bot${token}/${path}`;

    let preview = '';
    if(type.startsWith('image/')){
      preview = `<img src="${url}" alt="Uploaded Image" />`;
    } else if(type.startsWith('video/')){
      preview = `<video controls><source src="${url}" type="${type}">Your browser does not support the video tag.</video>`;
    } else if(type.startsWith('audio/')){
      preview = `<audio controls><source src="${url}" type="${type}">Your browser does not support the audio tag.</audio>`;
    }

    out.innerHTML = `
      тЬЕ File роЕрокрпНро▓рпЛроЯрпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ: <b>${file.name}</b><br><br>
      ${preview}
      <br><br>
      <a href="${url}" download target="_blank">ЁЯУе Download Directly</a><br><br>
      <small>${url}</small>
    `;

  } catch(err) {
    console.error(err);
    out.innerHTML="тЭМ Network роЕро▓рпНро▓родрпБ CORS рокро┐ро┤рпИ. Local server-ро▓рпН open роЪрпЖропрпНропро╡рпБроорпН (VS Code Live Server рокро░ро┐роирпНродрпБро░рпИ).";
  }
}
</script>

</body>
</html>
